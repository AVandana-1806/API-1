import gov.ca.cwds.data.legacy.cms.entity.CsecHistory;
import gov.ca.cwds.rest.exception.IssueDetails

global java.util.Set validationDetailsList

/*
   Code: R - 10975

   Rule text:
   The CSEC End Date must be greater than or equal to the CSEC Start Date.

   Access logic:
   COMMERCIAL_SEXUAL_EXPLOITATION_HISTORY.End_Date must be >= .Start_Date.
*/
rule "R-10975"
dialect "mvel"
  agenda-group "commercial-sexual-exploitation-agenda"
  when
     $csec: CsecHistory(startDate != null && endDate != null)
     eval ($csec.endDate.isBefore($csec.startDate))
  then
    IssueDetails details = new IssueDetails();
    details.setCode("R-10975");
    details.setUserMessage("CSEC End Date must be greater than or equal to CSEC Start Date");
    details.setTechnicalMessage("The CSEC End Date must be greater than or equal to the CSEC Start Date");
    validationDetailsList.add(details);
end   
     