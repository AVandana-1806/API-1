import gov.ca.cwds.rest.api.domain.Csec
import gov.ca.cwds.rest.exception.IssueDetails

global java.util.Set validationDetailsList

/*
   Code: R - 10975

   Rule text:
   The CSEC End Date must be greater than or equal to the CSEC Start Date.

   Access logic:
   COMMERCIAL_SEXUAL_EXPLOITATION_HISTORY.End_Date must be >= .Start_Date.
*/
rule "end date should be greater than or equal start date"
dialect "mvel"
  agenda-group "commercial-sexual-exploitation-agenda"
  when
     $csec: Csec(startDate != null && endDate != null)
     eval ($csec.endDate.isBefore($csec.startDate))
  then
    IssueDetails details = new IssueDetails();
    details.setCode("R-10975");
    details.setUserMessage("CSEC endDate should be greater than or equal to startDate");
    validationDetailsList.add(details);
end   
     